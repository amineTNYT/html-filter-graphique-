<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=1" />
    <meta name="theme-color" content="#162033">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>CSS Filters: Inverse, Blur & Grayscale â€” Fixed</title>
    <style>
        *{box-sizing:border-box;margin:0;padding:0;font-family:Sego UI, Tahoma, Geneva, Verdana, sans-serif}
        body{
            background:linear-gradient(135deg,#162033,#263747 60%,#2b2f36);
            color:#f7f7f7;
            min-height:100vh;padding:14px;line-height:1.5;
        }
        .container{max-width:1100px;margin:0 auto}

        header{background:rgba(0,0,0,.28);padding:20px;border-radius:12px;text-align:center;margin-bottom:22px}
        h1{font-size:1.8rem;margin-bottom:6px}
        .subtitle{opacity:.95;font-size:0.98rem;max-width:860px;margin:0 auto}

        .filters-section{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:24px}
        .filter-card{background:rgba(0,0,0,.28);padding:16px;border-radius:12px;box-shadow:0 6px 12px rgba(0,0,0,.25);margin:0 4px}

        h2{font-size:1.25rem;margin-bottom:12px;color:#63c7be;border-bottom:1px solid rgba(255,255,255,.08);padding-bottom:6px}

        .demo-area{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}
        .demo-item{text-align:center}
        .demo-title{font-size:.8rem;margin-bottom:6px;color:#9bd6d0;font-weight:700}

        .image-container{width:100%;height:120px;overflow:hidden;border-radius:8px;margin:0 auto 10px;position:relative;box-shadow:0 4px 8px rgba(0,0,0,.25)}
        .demo-image{width:100%;height:100%;object-fit:cover;display:block;opacity:1;transition:opacity 360ms ease}

        .loading-bar-container{position:absolute;left:0;bottom:0;width:100%;height:4px;background:rgba(255,255,255,.08);border-radius:0 0 6px 6px;overflow:hidden}
        .loading-bar{height:100%;width:0;background:#e1645a;border-radius:0 0 6px 6px;transition:width 320ms linear}

        .shape-container{display:flex;justify-content:center;align-items:center;height:120px;margin-bottom:10px;gap:12px}
        .shape{width:70px;height:70px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.85rem;border-radius:8px;transition:transform 260ms ease;animation:scalePulse 2.4s infinite}
        @keyframes scalePulse{0%{transform:scale(1)}50%{transform:scale(1.06)}100%{transform:scale(1)}}
        .square{background:#7b61b8;color:#fff}
        .circle{background:#d9534f;border-radius:50%;color:#fff}

        .filter-examples{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin:20px 0;}
        .filter-example{
            display:inline-block;padding:10px 8px;border-radius:8px;border:1px solid rgba(0,0,0,.08);
            background:#ffffff;color:#222;font-weight:700;cursor:pointer;text-align:center;font-size:.9rem;
            transition:transform .18s ease,box-shadow .18s ease,background-color .2s ease;
            margin:2px;min-height:42px;min-width:80px;
        }
        .filter-example:hover{transform:translateY(-3px);box-shadow:0 6px 16px rgba(0,0,0,.12)}
        .filter-example.active-filter{background:#0ea5a4;color:#fff;box-shadow:0 8px 18px rgba(14,165,164,.18);border-color:transparent}

        .code-examples{background:rgba(0,0,0,.5);padding:12px;border-radius:6px;margin-top:14px;font-family:monospace;white-space:pre-wrap;font-size:.85rem;line-height:1.4;border:1px solid rgba(255,255,255,.04)}

        .color-change-btn{
            background:#ffffff;color:#222;border:1px solid rgba(0,0,0,.06);padding:10px 12px;border-radius:8px;font-weight:700;cursor:pointer;width:100%;transition:transform .18s ease,background-color .2s ease;margin-top:8px;min-height:40px;font-size:.9rem;
        }
        .color-change-btn:hover{transform:translateY(-3px)}

        .interactive-section{background:rgba(0,0,0,.28);border-radius:12px;padding:16px;margin-top:18px}

        .interactive-demo{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:12px}
        .interactive-image-container{width:100%;height:180px;overflow:hidden;border-radius:8px;position:relative;box-shadow:0 8px 18px rgba(0,0,0,.28)}
        #interactive-image{width:100%;height:100%;object-fit:cover;display:block;transition:opacity 360ms ease}

        .interactive-loading-bar{position:absolute;left:0;bottom:0;width:100%;height:6px;background:rgba(255,255,255,.06);border-radius:0 0 8px 8px;overflow:hidden}
        .interactive-progress{height:100%;width:0;background:#e1645a;border-radius:0 0 8px 8px;transition:width 320ms linear}

        .interactive-shapes{display:flex;justify-content:space-around;align-items:center;height:180px;background:rgba(255,255,255,.04);border-radius:8px;padding:12px;margin-bottom:12px}
        .interactive-shape{width:66px;height:66px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.7rem;border-radius:8px;transition:transform .22s ease;animation:scalePulse 2.4s infinite}
        .interactive-square{background:#3498db;color:#fff}
        .interactive-circle{background:#e74c3c;color:#fff;border-radius:50%}
        .interactive-triangle{width:0;height:0;border-left:30px solid transparent;border-right:30px solid transparent;border-bottom:52px solid #2ecc71;background:transparent !important}

        .css-output{background:rgba(0,0,0,.5);border-radius:8px;padding:12px;margin-top:12px;font-family:monospace;white-space:pre-wrap;border:1px solid rgba(255,255,255,.04);font-size:.86rem}

        .syntax-btn{
            background:#0ea5a4;color:#fff;border:none;border-radius:8px;padding:14px 20px;display:block;
            margin:18px auto 0;font-weight:700;cursor:pointer;box-shadow:0 6px 14px rgba(0,0,0,.18);
            transition:transform .2s ease,background-color .2s ease;min-height:48px;width:100%;max-width:300px;
        }
        .syntax-btn:hover{
            transform:translateY(-3px);
        }
        .syntax-btn:hover{transform:translateY(-3px)}

        .explanation{margin-top:20px;background:rgba(0,0,0,.28);border-radius:12px;padding:16px}

        .filter-info{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;margin-top:12px}
        .info-card{background:rgba(0,0,0,.18);padding:12px;border-radius:8px;border-left:3px solid #63c7be}
        .info-card h3{color:#9bd6d0;margin-bottom:8px;font-size:1rem}
        .info-card p{margin-bottom:8px;font-size:.87rem}

        .filter-resume{margin-top:18px;background:rgba(0,0,0,.32);border-radius:8px;padding:12px}
        .resume-title{color:#63c7be;font-size:1.1rem;margin-bottom:10px;border-bottom:2px solid rgba(255,255,255,.04);padding-bottom:8px}

        @media(max-width:768px){
            .interactive-demo{grid-template-columns:1fr;gap:16px}
            .filters-section{grid-template-columns:1fr;gap:24px}
            .demo-area{grid-template-columns:1fr;gap:16px}
            .filter-examples{grid-template-columns:repeat(3,1fr);gap:12px;margin:16px 0}
            .filter-card{padding:20px}
            h1{font-size:1.6rem}
            .subtitle{font-size:0.95rem}
        }
        @media(max-width:480px){
            .filter-examples{grid-template-columns:repeat(2,1fr);gap:10px}
            .demo-area{grid-template-columns:1fr}
            body{padding:12px}
            .filter-example{font-size:0.9rem;padding:10px 8px;min-height:44px;margin:4px}
            .color-change-btn{padding:12px 14px;font-size:1rem;min-height:44px}
            h1{font-size:1.5rem}
            h2{font-size:1.3rem;margin-bottom:14px}
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>CSS Filters: Inverse, Blur & Grayscale</h1>
        <p class="subtitle">Click examples to apply filters to images and shapes</p>
    </header>

    <div class="filters-section">
        <div class="filter-card">
            <h2>Blur Filter</h2>
            <div class="demo-area">
                <div class="demo-item">
                    <div class="demo-title">Image Example</div>
                    <div class="image-container">
                        <img class="demo-image blur-demo" src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=500&q=80" alt="Mountain landscape">
                        <div class="loading-bar-container">
                            <div class="loading-bar blur-loading" style="width:100%"></div>
                        </div>
                    </div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">Shapes Example</div>
                    <div class="shape-container">
                        <div class="shape square blur-demo">Square</div>
                        <div class="shape circle blur-demo">Circle</div>
                    </div>
                    <button class="color-change-btn" data-shapes="blur">Change Colors</button>
                </div>
            </div>

            <div class="filter-examples">
                <button class="filter-example" data-filter="blur" data-value="0px">blur(0px)</button>
                <button class="filter-example" data-filter="blur" data-value="3px">blur(3px)</button>
                <button class="filter-example" data-filter="blur" data-value="8px">blur(8px)</button>
            </div>

            <div class="code-examples">
/* Apply blur to elements */
.element {
  filter: blur(5px);
}
            </div>
        </div>

        <div class="filter-card">
            <h2>Grayscale Filter</h2>
            <div class="demo-area">
                <div class="demo-item">
                    <div class="demo-title">Image Example</div>
                    <div class="image-container">
                        <img class="demo-image grayscale-demo" src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=500&q=80" alt="Mountain landscape">
                        <div class="loading-bar-container">
                            <div class="loading-bar grayscale-loading" style="width:100%"></div>
                        </div>
                    </div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">Shapes Example</div>
                    <div class="shape-container">
                        <div class="shape square grayscale-demo">Square</div>
                        <div class="shape circle grayscale-demo">Circle</div>
                    </div>
                    <button class="color-change-btn" data-shapes="grayscale">Change Colors</button>
                </div>
            </div>

            <div class="filter-examples">
                <button class="filter-example" data-filter="grayscale" data-value="0%">grayscale(0%)</button>
                <button class="filter-example" data-filter="grayscale" data-value="50%">grayscale(50%)</button>
                <button class="filter-example" data-filter="grayscale" data-value="100%">grayscale(100%)</button>
            </div>

            <div class="code-examples">
/* Apply grayscale to elements */
.element { filter: grayscale(100%); }
            </div>
        </div>

        <div class="filter-card">
            <h2>Invert Filter</h2>
            <div class="demo-area">
                <div class="demo-item">
                    <div class="demo-title">Image Example</div>
                    <div class="image-container">
                        <img class="demo-image invert-demo" src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=500&q=80" alt="Mountain landscape">
                        <div class="loading-bar-container">
                            <div class="loading-bar invert-loading" style="width:100%"></div>
                        </div>
                    </div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">Shapes Example</div>
                    <div class="shape-container">
                        <div class="shape square invert-demo">Square</div>
                        <div class="shape circle invert-demo">Circle</div>
                    </div>
                    <button class="color-change-btn" data-shapes="invert">Change Colors</button>
                </div>
            </div>

            <div class="filter-examples">
                <button class="filter-example" data-filter="invert" data-value="0%">invert(0%)</button>
                <button class="filter-example" data-filter="invert" data-value="50%">invert(50%)</button>
                <button class="filter-example" data-filter="invert" data-value="100%">invert(100%)</button>
            </div>

            <div class="code-examples">
/* Apply invert to elements */
.element { filter: invert(100%); }
            </div>
        </div>
    </div>

    <div class="interactive-section">
        <h2>Interactive Playground</h2>
        <p>Apply filters to both an image and shapes simultaneously</p>

        <div class="interactive-demo">
            <div>
                <div class="interactive-image-container">
                    <img id="interactive-image" src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80" alt="Mountain landscape">
                    <div class="interactive-loading-bar">
                        <div class="interactive-progress" id="interactive-progress" style="width:100%"></div>
                    </div>
                </div>
            </div>

            <div>
                <div class="interactive-shapes">
                    <div class="interactive-shape interactive-square">Square</div>
                    <div class="interactive-shape interactive-circle">Circle</div>
                    <div class="interactive-shape interactive-triangle">Triangle</div>
                </div>
                <button class="color-change-btn" id="change-all-colors">Change All Colors</button>
            </div>
        </div>

        <div class="filter-examples" style="margin-top:12px">
            <button class="filter-example" data-filter="all" data-value="blur(5px)">Add Blur</button>
            <button class="filter-example" data-filter="all" data-value="grayscale(100%)">Add Grayscale</button>
            <button class="filter-example" data-filter="all" data-value="invert(100%)">Add Invert</button>
            <button class="filter-example" data-filter="all" data-value="none">Reset All</button>
        </div>

        <div style="display:flex;gap:10px;margin-top:10px;align-items:center">
            <div class="css-output" id="css-output">filter: none;</div>
            <button id="reset-playground" class="color-change-btn" style="max-width:180px">Reset Playground</button>
        </div>
    </div>

    <div class="button-group">
        <button class="syntax-btn" id="show-syntax">Show Complete CSS Filter Syntax</button>
    </div>

    <section class="explanation">
        <h2>Understanding CSS Filters</h2>
        <div class="filter-info">
            <div class="info-card">
                <h3>blur()</h3>
                <p>Applies a Gaussian blur. Parameter in pixels.</p>
            </div>
            <div class="info-card">
                <h3>grayscale()</h3>
                <p>Converts to grayscale. Value in percent.</p>
            </div>
            <div class="info-card">
                <h3>invert()</h3>
                <p>Inverts colors. Value in percent.</p>
            </div>
            <div class="info-card">
                <h3>Combine</h3>
                <p>List functions in order. Order changes result.</p>
            </div>
        </div>
    </section>
</div>

<!-- Syntax Modal -->
<div class="syntax-modal" id="syntax-modal" style="display:none;z-index:10000;position:fixed;inset:0;background:rgba(0,0,0,.85);overflow:auto;padding:20px">
    <div class="syntax-content" style="max-width:900px;margin:30px auto;border-radius:12px;padding:22px;background:linear-gradient(135deg,#2c3e50,#34495e);box-shadow:0 10px 30px rgba(0,0,0,.5)">
        <button id="close-syntax" class="close-btn" aria-label="close" style="position:absolute;right:26px;top:18px;background:none;border:none;color:#fff;font-size:22px;cursor:pointer">&times;</button>
        <h2 style="color:#fff;margin-bottom:12px">Complete CSS Filters Syntax & Notations</h2>
        <div style="background:rgba(0,0,0,.5);padding:12px;border-radius:8px;color:#fff;font-family:monospace;white-space:pre-wrap">/* see previous version for full syntax */</div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded - initializing filters');
    
    // Image URLs for cycling
    const imageUrls = [
        'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80',
        'https://images.unsplash.com/photo-1470770903676-69b98201ea1c?auto=format&fit=crop&w=800&q=80',
        'https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&fit=crop&w=800&q=80'
    ];

    // Color palettes
    const shapeColors = [
        ['#7b61b8', '#d9534f'],
        ['#3498db', '#2ecc71'],
        ['#f39c12', '#8e44ad'],
        ['#1abc9c', '#e67e22']
    ];
    
    const interactiveColors = [
        ['#3498db', '#e74c3c', '#2ecc71'],
        ['#9b59b6', '#f39c12', '#1abc9c'],
        ['#e74c3c', '#3498db', '#f39c12'],
        ['#2ecc71', '#8e44ad', '#e67e22']
    ];

    // State variables
    let currentColorIndex = 0;
    let currentInteractiveColorIndex = 0;
    let currentFilters = [];

    // Get DOM elements
    const filterExamples = document.querySelectorAll('.filter-example');
    const blurDemos = document.querySelectorAll('.blur-demo');
    const grayscaleDemos = document.querySelectorAll('.grayscale-demo');
    const invertDemos = document.querySelectorAll('.invert-demo');
    const interactiveImage = document.getElementById('interactive-image');
    const interactiveShapes = document.querySelectorAll('.interactive-shape');
    const cssOutput = document.getElementById('css-output');
    const changeAllColorsBtn = document.getElementById('change-all-colors');
    const resetPlaygroundBtn = document.getElementById('reset-playground');
    const syntaxBtn = document.getElementById('show-syntax');
    const syntaxModal = document.getElementById('syntax-modal');
    const closeSyntax = document.getElementById('close-syntax');

    console.log('Elements found:', {
        filterExamples: filterExamples.length,
        blurDemos: blurDemos.length,
        grayscaleDemos: grayscaleDemos.length,
        invertDemos: invertDemos.length,
        interactiveImage: !!interactiveImage,
        interactiveShapes: interactiveShapes.length
    });

    // Initialize active states
    function initializeActiveStates() {
        document.querySelectorAll('.filter-example[data-value="0px"], .filter-example[data-value="0%"]').forEach(btn => {
            btn.classList.add('active-filter');
        });
        console.log('Active states initialized');
    }

    // Image cycling function
    function startImageCycling() {
        let idx = 0;
        
        setInterval(() => {
            idx = (idx + 1) % imageUrls.length;
            const nextSrc = imageUrls[idx] + '&t=' + Date.now();
            const temp = new Image();
            
            temp.onload = () => {
                const allImgs = document.querySelectorAll('.demo-image, #interactive-image');
                allImgs.forEach(img => img.style.opacity = '0');
                
                setTimeout(() => {
                    allImgs.forEach(img => {
                        img.src = nextSrc;
                        img.style.opacity = '1';
                    });
                }, 360);
            };
            
            temp.src = nextSrc;
        }, 5000);
    }

    // Change shape colors
    function changeShapeColors(type) {
        console.log('Changing colors for:', type);
        
        if (type === 'all') {
            const colors = interactiveColors[currentInteractiveColorIndex];
            interactiveShapes[0].style.background = colors[0];
            interactiveShapes[1].style.background = colors[1];
            interactiveShapes[2].style.borderBottomColor = colors[2];
            currentInteractiveColorIndex = (currentInteractiveColorIndex + 1) % interactiveColors.length;
        } else {
            const shapes = document.querySelectorAll(`.${type}-demo.shape`);
            if (shapes.length >= 2) {
                const colors = shapeColors[currentColorIndex];
                shapes[0].style.background = colors[0];
                shapes[1].style.background = colors[1];
                currentColorIndex = (currentColorIndex + 1) % shapeColors.length;
            }
        }
    }

    // Apply filters to demos
    function applyFilterToDemos(filterType, value) {
        console.log('Applying filter:', filterType, value);
        
        let elements;
        switch(filterType) {
            case 'blur': 
                elements = blurDemos; 
                break;
            case 'grayscale': 
                elements = grayscaleDemos; 
                break;
            case 'invert': 
                elements = invertDemos; 
                break;
            default: 
                return;
        }
        
        elements.forEach(el => {
            el.style.filter = `${filterType}(${value})`;
        });
    }

    // Update interactive elements
    function updateInteractiveElements() {
        const filterString = currentFilters.join(' ');
        console.log('Updating interactive elements with filter:', filterString);
        
        interactiveImage.style.filter = filterString || 'none';
        interactiveShapes.forEach(s => s.style.filter = filterString || 'none');
        cssOutput.textContent = `filter: ${filterString || 'none'};`;
    }

    // Event listeners for filter buttons
    filterExamples.forEach(button => {
        button.addEventListener('click', function() {
            const filterType = this.getAttribute('data-filter');
            const value = this.getAttribute('data-value');
            
            console.log('Filter button clicked:', filterType, value);

            // Remove active class from siblings
            const parent = this.parentElement;
            parent.querySelectorAll('.filter-example').forEach(s => {
                s.classList.remove('active-filter');
            });
            this.classList.add('active-filter');

            if (filterType === 'all') {
                if (value === 'none') {
                    currentFilters = [];
                } else {
                    // Replace same-named filter
                    const name = value.split('(')[0];
                    currentFilters = currentFilters.filter(f => !f.startsWith(name));
                    currentFilters.push(value);
                }
                updateInteractiveElements();
            } else {
                applyFilterToDemos(filterType, value);
            }
        });
    });

    // Event listeners for color change buttons
    document.querySelectorAll('.color-change-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const shapesType = this.getAttribute('data-shapes');
            changeShapeColors(shapesType || 'all');
        });
    });

    // Event listener for change all colors button
    changeAllColorsBtn.addEventListener('click', () => {
        changeShapeColors('all');
    });

    // Event listener for reset playground button
    resetPlaygroundBtn.addEventListener('click', () => {
        console.log('Resetting playground');
        currentFilters = [];
        interactiveImage.style.filter = 'none';
        interactiveShapes.forEach(s => s.style.filter = 'none');
        cssOutput.textContent = 'filter: none;';
        
        // Reset individual filter sections
        applyFilterToDemos('blur', '0px');
        applyFilterToDemos('grayscale', '0%');
        applyFilterToDemos('invert', '0%');
        
        // Reset active states
        document.querySelectorAll('.filter-example').forEach(btn => {
            btn.classList.remove('active-filter');
        });
        initializeActiveStates();
    });

    // Modal functionality
    syntaxBtn.addEventListener('click', () => {
        syntaxModal.style.display = 'block';
    });

    closeSyntax.addEventListener('click', () => {
        syntaxModal.style.display = 'none';
    });

    window.addEventListener('click', (e) => {
        if (e.target === syntaxModal) {
            syntaxModal.style.display = 'none';
        }
    });

    // Initialize the page
    initializeActiveStates();
    startImageCycling();
    
    console.log('Filters page initialized successfully');
});
</script>
</body>
</html>